# How-to - reconstruct panels of Fig. 3
## Notes
Data underlying panel A are further detailed in Fig. S9, S10, and S11. Data underlying panel B are further detailed in Fig. S12  
## By panel:
### Panel A
Prepare the input file with `prep_exports_from_duckdb.sh`  
Note: the hits data must be imported in the database as described in "Analyses/Target_IMGVR_IMGPR/"  
Then fig_hits_input_vr.tsv and fig_hits_input_pr.tsv can be used as input to prepare the panel A plot in R, as shown in `prepare_plots.R`
### Panel B
Prepare the input file with `./match_conservation_to_known_pams.pl` as described in "Analyses/Target_IMGVR_IMGPR/"  
### Panel C
Prepare the input file with `./spacer_type_vs_hit_rate.pl run`
Note: this requires files generated at previous steps, as described in "Analyses/Spacer_database/extract_alphadiv_data.sh", "Analyses/Spacer_database/link_spacer_to_eco_clean.pl" and "Analyses/Target_IMGVR_IMGPR/export_spacer_hit_stats.sh"  
Then, "hit_counts_stats_clean.tsv" can be used as input to prepare the panel C plot in R, as shown in `prepare_plots.R`  
### Panels D & E
Prepare the input file with `./get_hq_votu_hits_stats.pl run`  
Note: this requires files generated by scripts in "Analyses/Target_IMGVR_IMGPR/" (see Readme)  
Then multihit_votu_totaldistrib_hqonly.tsv can be used as input to prepare the panel D plot in R, and multihit_votu_vs_distance_sample_hqonly.tsv can be used to prepare the panel E plot, as shown in `prepare_plots.R`  

